<!DOCTYPE html>
<html lang="zh-CN">

<head>
  <meta charset="UTF-8">
  <!-- è®¾ç½®é¡µé¢è§†å£ï¼Œç¡®ä¿ç§»åŠ¨ç«¯æ­£å¸¸æ˜¾ç¤º -->
  <meta name="viewport"
    content="width=device-width, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0, user-scalable=no">
  <title>Live&#8204;User</title>
  <!-- è®¾ç½®é¡µé¢å›¾æ ‡ -->
  <link rel="icon" type="image/png" href="https://img.icons8.com/parakeet/1000/user.png">

  <!-- è®¾ç½®Open Graphå…ƒæ•°æ®ï¼Œç”¨äºç¤¾äº¤åˆ†äº« -->
  <meta property="og:description" content="Easily check LiveUser count on the website.">
  <meta property="og:image" content="https://img.icons8.com/parakeet/1000/user.png">

  <!-- å¼•å…¥ layui JavaScript æ¡†æ¶ -->
  <script src="https://cdn.jsdelivr.net/npm/layui/dist/layui.min.js"></script>
  <!-- å¼•å…¥ layui æ·±è‰²ä¸»é¢˜ -->
  <script src="https://cdn.jsdelivr.net/gh/ymyuuu/config/JS/layui-dark.js"></script>
  <!-- å¼•å…¥ layui CSS æ ·å¼ -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/layui/dist/css/layui.min.css">

  <style>
    /* è®¾ç½®å“åº”å¼å®¹å™¨çš„å†…è¾¹è· */
    .layui-container {
      padding: 0 20px;
    }

    /* LiveUser æ•°å­—æ›´æ–°åŠ¨ç”»æ•ˆæœ */
    #liveuser {
      transition: all 0.3s ease; /* å¹³æ»‘è¿‡æ¸¡åŠ¨ç”» */
      display: inline-block; /* è¡Œå†…å—æ˜¾ç¤ºï¼Œæ”¯æŒtransformå˜æ¢ */
    }

    /* æ•°å­—æ›´æ–°æ—¶çš„åŠ¨ç”»æ ·å¼ */
    #liveuser.updating {
      transform: scale(1.2); /* æ”¾å¤§1.2å€ */
      color: #FFB800; /* æ”¹å˜é¢œè‰²ä¸ºé‡‘é»„è‰² */
    }
  </style>
</head>

<body>
  <!-- ä¸»å®¹å™¨ï¼Œä½¿ç”¨layuiå“åº”å¼å¸ƒå±€ -->
  <div class="layui-container layui-text" style="margin-top: 20px;">
    <div class="layui-row">
      <!-- å“åº”å¼åˆ—å¸ƒå±€ï¼šæ‰‹æœº12åˆ—ï¼Œå¹³æ¿10åˆ—ï¼Œæ¡Œé¢8åˆ—å¹¶å±…ä¸­ -->
      <div class="layui-col-xs12 layui-col-sm10 layui-col-md8 layui-col-md-offset2">

        <!-- LiveUser Status æ¨¡å— -->
        <fieldset class="layui-elem-field layui-field-title">
          <legend><i class="layui-icon layui-icon-radio"></i> LiveUser Status</legend>
          <div class="layui-field-box">
            <blockquote class="layui-elem-quote">
              <p>å½“å‰åœ¨çº¿äººæ•°ï¼š
                <!-- æ˜¾ç¤ºåœ¨çº¿äººæ•°çš„å…ƒç´ ï¼Œåˆå§‹æ˜¾ç¤ºåŠ è½½åŠ¨ç”» -->
                <span id="liveuser">
                  <i class="layui-icon layui-icon-loading-1 layui-anim layui-anim-rotate layui-anim-loop"
                    style="font-size: 14px;"></i>
                </span>
              </p>
            </blockquote>
          </div>
        </fieldset>

        <!-- æœåŠ¡ä»‹ç»æ¨¡å— -->
        <fieldset class="layui-elem-field layui-field-title">
          <legend><i class="layui-icon layui-icon-user"></i> LiveUser æœåŠ¡ä»‹ç»</legend>
          <div class="layui-field-box">
            <blockquote class="layui-elem-quote">
              LiveUser æ˜¯ä¸€æ¬¾åŸºäº Go + WebSocket æŠ€æœ¯çš„é«˜æ€§èƒ½å®æ—¶åœ¨çº¿ç”¨æˆ·ç»Ÿè®¡æœåŠ¡ï¼Œæ—¨åœ¨ä¸ºç½‘ç«™æä¾›ç²¾å‡†çš„å®æ—¶åœ¨çº¿äººæ•°ç»Ÿè®¡ä¸ç›‘æ§ã€‚
            </blockquote>
            <ul class="layui-ul">
              <li><strong>âš¡ è¶…ä½å»¶è¿Ÿï¼š</strong> é€šè¿‡ WebSocket é•¿è¿æ¥å®ç°æ¯«ç§’çº§æ•°æ®ä¼ è¾“ï¼Œç¡®ä¿åœ¨çº¿äººæ•°ç»Ÿè®¡å®æ—¶æ›´æ–°ã€‚</li>
              <li><strong>ğŸ”’ é«˜ç¨³å®šæ€§ï¼š</strong> Go è¯­è¨€åŸç”Ÿå¹¶å‘ï¼Œæ”¯æŒä¸‡çº§å¹¶å‘è¿æ¥ï¼Œä¿è¯é«˜æµé‡æƒ…å†µä¸‹ç¨³å®šè¿è¡Œã€‚</li>
              <li><strong>ğŸ”— æ— ç¼é›†æˆï¼š</strong> åªéœ€å¼•å…¥ä¸€è¡Œ script æ ‡ç­¾å³å¯è½»æ¾é›†æˆåˆ°ä»»ä½•ç½‘ç«™ï¼Œå…¼å®¹å„ç§ä¸»æµæµè§ˆå™¨ã€‚</li>
              <li><strong>ğŸ“ˆ å®æ—¶åˆ†æï¼š</strong> å®æ—¶æ˜¾ç¤ºå½“å‰ç«™ç‚¹åœ¨çº¿äººæ•°ï¼Œå¸®åŠ©æ‚¨å¿«é€Ÿæ´å¯Ÿç”¨æˆ·è¡Œä¸ºã€‚</li>
              <li><strong>ğŸŒ å¤šç«™ç‚¹æ”¯æŒï¼š</strong> æ”¯æŒè‡ªå®šä¹‰ <code>siteId</code>ï¼Œå¯åŒæ—¶ç›‘æ§å¤šä¸ªç«™ç‚¹æˆ–å­åŸŸåçš„åœ¨çº¿äººæ•°ã€‚</li>
              <li><strong>ğŸš€ å³æ’å³ç”¨ï¼š</strong> æ‰“å¼€é¡µé¢è‡ªåŠ¨è¿æ¥ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ï¼Œæ”¯æŒè‡ªåŠ¨é‡è¿æœºåˆ¶ã€‚</li>
              <li><strong>âš™ï¸ åŠ¨æ€é…ç½®ï¼š</strong> é€šè¿‡ URL å‚æ•°çµæ´»é…ç½®ï¼Œæ— éœ€ä¿®æ”¹ä»£ç ã€‚</li>
            </ul>
          </div>
        </fieldset>

        <!-- å¦‚ä½•å¼€å§‹ä½¿ç”¨æ¨¡å— -->
        <blockquote class="layui-elem-quote">
          <i class="layui-icon layui-icon-form"></i> å¦‚ä½•å¿«é€Ÿå¼€å§‹ä½¿ç”¨ LiveUser
        </blockquote>
        <div class="layui-field-box">
          <p>ä½¿ç”¨ LiveUser æå…¶ç®€å•ï¼Œåªéœ€ä¸¤æ­¥ï¼š</p>

          <p><strong>ç¬¬ä¸€æ­¥ï¼šæ·»åŠ æ˜¾ç¤ºå…ƒç´ </strong></p>
          <!-- ä»£ç ç¤ºä¾‹1ï¼šç›´æ¥åœ¨HTMLä¸­ç¼–å†™ï¼Œé¿å…JavaScriptåŠ¨æ€ç”Ÿæˆæ—¶çš„ç¼–ç é—®é¢˜ -->
          <pre class="layui-code code-demo"><!-- æ˜¾ç¤ºå…ƒç´  -->
<span id="liveuser">åŠ è½½ä¸­...</span></pre>

          <p><strong>ç¬¬äºŒæ­¥ï¼šå¼•å…¥åŠ¨æ€è„šæœ¬</strong></p>
          <!-- ä»£ç ç¤ºä¾‹2ï¼šä½¿ç”¨spanæ ‡ç­¾åŒ…è£¹åŠ¨æ€å†…å®¹ï¼Œé¿å…scriptæ ‡ç­¾è§£æé—®é¢˜ -->
          <pre class="layui-code code-demo" id="example2"></pre>

          <p>å°±è¿™ä¸¤æ­¥ï¼LiveUser ä¼šè‡ªåŠ¨è¿æ¥å¹¶æ˜¾ç¤ºåœ¨çº¿äººæ•°ã€‚<br>
            <strong>âœ¨ ç‰¹è‰²ï¼š</strong>æœåŠ¡å™¨åœ°å€è‡ªåŠ¨è¯†åˆ«ï¼Œç«™ç‚¹ ID è‡ªåŠ¨è·å–ï¼Œæ— éœ€æ‰‹åŠ¨é…ç½®ï¼
          </p>
        </div>

        <!-- è¿›é˜¶ç”¨æ³•æ¨¡å— -->
        <blockquote class="layui-elem-quote">
          <i class="layui-icon layui-icon-set"></i> è¿›é˜¶ç”¨æ³• - URL å‚æ•°é…ç½®
        </blockquote>
        <div class="layui-field-box">
          <p>æ‚¨å¯ä»¥é€šè¿‡ URL å‚æ•°æ¥è‡ªå®šä¹‰ LiveUser çš„é…ç½®ï¼š</p>
          <!-- ä»£ç ç¤ºä¾‹3ï¼šå‚æ•°é…ç½®ç¤ºä¾‹ -->
          <pre class="layui-code code-demo" id="example3"></pre>

          <p><strong>å¯ç”¨å‚æ•°ï¼š</strong></p>
          <ul class="layui-ul">
            <li><code>serverUrl</code> - WebSocket æœåŠ¡å™¨åœ°å€ï¼ˆé»˜è®¤ï¼šè‡ªåŠ¨è¯†åˆ«ï¼‰</li>
            <li><code>siteId</code> - ç«™ç‚¹æ ‡è¯†ç¬¦ï¼ˆé»˜è®¤ï¼šè‡ªåŠ¨è·å–åŸŸåï¼‰</li>
            <li><code>displayElementId</code> - æ˜¾ç¤ºå…ƒç´  IDï¼ˆé»˜è®¤ï¼šliveuserï¼‰</li>
            <li><code>reconnectDelay</code> - é‡è¿å»¶è¿Ÿæ¯«ç§’ï¼ˆé»˜è®¤ï¼š3000ï¼‰</li>
            <li><code>debug</code> - è°ƒè¯•æ¨¡å¼ï¼ˆé»˜è®¤ï¼štrueï¼‰</li>
          </ul>

          <p><strong>å¤šç§ä½¿ç”¨æ–¹å¼ï¼š</strong></p>
          <!-- ä»£ç ç¤ºä¾‹4ï¼šå¤šç§ä½¿ç”¨åœºæ™¯ -->
          <pre class="layui-code code-demo" id="example4"></pre>
        </div>

        <!-- ç‰¹æ€§è¯´æ˜æ¨¡å— -->
        <blockquote class="layui-elem-quote">
          <i class="layui-icon layui-icon-star"></i> æŠ€æœ¯ç‰¹æ€§
        </blockquote>
        <div class="layui-field-box">
          <ul class="layui-ul">
            <li><strong>ğŸ”„ æ™ºèƒ½é‡è¿ï¼š</strong> ç½‘ç»œæ–­å¼€åè‡ªåŠ¨é‡è¿ï¼Œè¿æ¥ç¨³å®šå¯é ã€‚</li>
            <li><strong>ğŸ“± å“åº”å¼ï¼š</strong> æ”¯æŒé¡µé¢å¯è§æ€§æ£€æµ‹ï¼Œé¡µé¢éšè—æ—¶ä¿æŒè¿æ¥ã€‚</li>
            <li><strong>ğŸ›¡ï¸ å®‰å…¨é˜²æŠ¤ï¼š</strong> æ”¯æŒè·¨åŸŸè¿æ¥ï¼Œå…¼å®¹å„ç§éƒ¨ç½²ç¯å¢ƒã€‚</li>
            <li><strong>âš™ï¸ çµæ´»è·¯å¾„ï¼š</strong> WebSocket æ”¯æŒä»»æ„è·¯å¾„è¿æ¥ï¼Œéƒ¨ç½²æ›´çµæ´»ã€‚</li>
            <li><strong>ğŸ’¾ è½»é‡çº§ï¼š</strong> æ— éœ€æ•°æ®åº“ï¼Œçº¯å†…å­˜ç»Ÿè®¡ï¼Œæ€§èƒ½å“è¶Šã€‚</li>
            <li><strong>ğŸ¨ åŠ¨ç”»æ•ˆæœï¼š</strong> å†…ç½®æ•°å­—æ›´æ–°åŠ¨ç”»ï¼Œè§†è§‰æ•ˆæœæ›´ä½³ã€‚</li>
          </ul>
        </div>

        <!-- å¸¸è§é—®é¢˜æ¨¡å— -->
        <fieldset class="layui-elem-field layui-field-title">
          <legend><i class="layui-icon layui-icon-note"></i> å¸¸è§é—®é¢˜è§£ç­”</legend>
          <div class="layui-field-box">
            <ul class="layui-ul">
              <li><strong>Q1: LiveUser èƒ½å¦æ˜¾ç¤ºå¤šä¸ªç«™ç‚¹çš„åœ¨çº¿äººæ•°ï¼Ÿ</strong>
                <p>å¯ä»¥ï¼Œæ‚¨å¯ä»¥åœ¨ä¸åŒçš„ç«™ç‚¹æˆ–é¡µé¢ä¸­è®¾ç½®ä¸åŒçš„ <code>siteId</code>ï¼Œè¿™æ · LiveUser æœåŠ¡ä¼šåˆ†åˆ«ç»Ÿè®¡è¿™äº›ç«™ç‚¹çš„åœ¨çº¿äººæ•°ã€‚</p>
              </li>
              <li><strong>Q2: LiveUser æ”¯æŒå“ªäº›æµè§ˆå™¨ï¼Ÿ</strong>
                <p>LiveUser æ”¯æŒæ‰€æœ‰ç°ä»£æµè§ˆå™¨ï¼ŒåŒ…æ‹¬ Chromeã€Firefoxã€Safariã€Edge ç­‰ï¼Œä»¥åŠç§»åŠ¨ç«¯æµè§ˆå™¨ã€‚</p>
              </li>
              <li><strong>Q3: æˆ‘çš„åœ¨çº¿äººæ•°æ˜¾ç¤ºä¸ºè¿æ¥ä¸­ï¼Œæ€ä¹ˆå›äº‹ï¼Ÿ</strong>
                <p>è¯·æ£€æŸ¥æœåŠ¡å™¨åœ°å€æ˜¯å¦æ­£ç¡®ï¼Œç½‘ç»œè¿æ¥æ˜¯å¦æ­£å¸¸ï¼Œä»¥åŠæµè§ˆå™¨æ§åˆ¶å°æ˜¯å¦æœ‰é”™è¯¯ä¿¡æ¯ã€‚</p>
              </li>
              <li><strong>Q4: å¦‚ä½•è°ƒè¯• WebSocket è¿æ¥é—®é¢˜ï¼Ÿ</strong>
                <p>æ‰“å¼€æµè§ˆå™¨çš„å¼€å‘è€…å·¥å…·ï¼ŒæŸ¥çœ‹æ§åˆ¶å°æ—¥å¿—è¾“å‡ºå’Œ Network æ ‡ç­¾é¡µçš„ WebSocket è¿æ¥çŠ¶æ€ã€‚</p>
              </li>
              <li><strong>Q5: æœåŠ¡å™¨æ”¯æŒ HTTPS å—ï¼Ÿ</strong>
                <p>æ”¯æŒï¼Œåœ¨ HTTPS ç¯å¢ƒä¸‹è¯·ä½¿ç”¨ <code>wss://</code> åè®®è¿æ¥ WebSocket æœåŠ¡å™¨ã€‚</p>
              </li>
              <li><strong>Q6: å¦‚ä½•è‡ªå®šä¹‰æ•°å­—æ›´æ–°çš„åŠ¨ç”»æ•ˆæœï¼Ÿ</strong>
                <p>å¯ä»¥é€šè¿‡ CSS è‡ªå®šä¹‰ <code>.updating</code> ç±»çš„æ ·å¼ï¼ŒLiveUser ä¼šåœ¨æ•°å­—æ›´æ–°æ—¶è‡ªåŠ¨æ·»åŠ è¿™ä¸ªç±»ã€‚</p>
                <pre style="background: #f5f5f5; padding: 10px; margin: 5px 0; border-radius: 4px; font-size: 12px;">
#liveuser {
  transition: all 0.3s ease;
  display: inline-block;
}
#liveuser.updating {
  transform: scale(1.2);
  color: #FFB800;
  /* ä½ å¯ä»¥æ·»åŠ æ›´å¤šæ ·å¼ */
}</pre>
              </li>
            </ul>
          </div>
        </fieldset>

      </div>
    </div>
  </div>

  <script>
    // è·å–å½“å‰åè®®å’Œä¸»æœºä¿¡æ¯ï¼Œç”¨äºç”ŸæˆåŠ¨æ€ç¤ºä¾‹ä»£ç 
    const currentHost = window.location.host;
    const protocol = window.location.protocol;

    // åˆ›å»ºHTMLè§£ç å‡½æ•°ï¼Œç”¨äºå°†HTMLå®ä½“è½¬æ¢ä¸ºæ­£å¸¸å­—ç¬¦
    function decodeHTML(html) {
      const txt = document.createElement('textarea');
      txt.innerHTML = html;
      return txt.value;
    }

    // å®‰å…¨åœ°è®¾ç½®ä»£ç ç¤ºä¾‹å†…å®¹ï¼Œé¿å…HTMLå®ä½“ç¼–ç é—®é¢˜
    function setCodeExample(elementId, content) {
      const element = document.getElementById(elementId);
      if (element) {
        // ä½¿ç”¨innerHTMLè€Œä¸æ˜¯textContentï¼Œç¡®ä¿å†…å®¹æ­£ç¡®æ˜¾ç¤º
        element.innerHTML = content;
      }
    }

    // ç¤ºä¾‹ 2ï¼šåŸºç¡€å¼•å…¥æ–¹å¼çš„è„šæœ¬æ ‡ç­¾
    const basicScript = `&lt;script src="${protocol}//${currentHost}/liveuser.js"&gt;&lt;/script&gt;`;
    setCodeExample('example2', basicScript);

    // ç¤ºä¾‹ 3ï¼šå¸¦å‚æ•°çš„é…ç½®æ–¹å¼
    const paramExample = `&lt;!-- è‡ªå®šä¹‰é…ç½®ç¤ºä¾‹ --&gt;
&lt;script src="${protocol}//${currentHost}/liveuser.js?siteId=my-site&amp;debug=false"&gt;&lt;/script&gt;

&lt;!-- æŒ‡å®šæœåŠ¡å™¨åœ°å€ --&gt;
&lt;script src="${protocol}//${currentHost}/liveuser.js?serverUrl=wss://my-server.com&amp;siteId=blog"&gt;&lt;/script&gt;

&lt;!-- å®Œæ•´é…ç½® --&gt;
&lt;script src="${protocol}//${currentHost}/liveuser.js?serverUrl=wss://live.example.com&amp;siteId=homepage&amp;displayElementId=counter&amp;reconnectDelay=5000&amp;debug=true"&gt;&lt;/script&gt;`;
    setCodeExample('example3', paramExample);

    // ç¤ºä¾‹ 4ï¼šå¤šç§ä½¿ç”¨åœºæ™¯
    const usageExample = `&lt;!-- åŸºç¡€ä½¿ç”¨ï¼ˆæ¨èï¼‰ --&gt;
&lt;span id="liveuser"&gt;0&lt;/span&gt;
&lt;style&gt;
#liveuser { transition: all 0.3s ease; display: inline-block; }
#liveuser.updating { transform: scale(1.2); color: #FFB800; }
&lt;/style&gt;
&lt;script src="${protocol}//${currentHost}/liveuser.js"&gt;&lt;/script&gt;

&lt;!-- åšå®¢é¡µé¢ --&gt;
&lt;span id="liveuser"&gt;0&lt;/span&gt;
&lt;script src="${protocol}//${currentHost}/liveuser.js?siteId=blog"&gt;&lt;/script&gt;

&lt;!-- äº§å“é¡µé¢ --&gt;
&lt;span id="liveuser"&gt;0&lt;/span&gt;
&lt;script src="${protocol}//${currentHost}/liveuser.js?siteId=product-page"&gt;&lt;/script&gt;

&lt;!-- è‡ªå®šä¹‰å…ƒç´  ID --&gt;
&lt;span id="online-count"&gt;0&lt;/span&gt;
&lt;style&gt;
#online-count { transition: all 0.3s ease; display: inline-block; }
#online-count.updating { transform: scale(1.2); color: #FFB800; }
&lt;/style&gt;
&lt;script src="${protocol}//${currentHost}/liveuser.js?displayElementId=online-count"&gt;&lt;/script&gt;

&lt;!-- ç”Ÿäº§ç¯å¢ƒï¼ˆå…³é—­è°ƒè¯•ï¼‰ --&gt;
&lt;span id="liveuser"&gt;0&lt;/span&gt;
&lt;script src="${protocol}//${currentHost}/liveuser.js?debug=false"&gt;&lt;/script&gt;`;
    setCodeExample('example4', usageExample);
  </script>

  <script>
    // åˆå§‹åŒ–layuiä»£ç é«˜äº®ç»„ä»¶
    layui.use(function () {
      layui.code({
        elem: '.code-demo' // ä¸ºæ‰€æœ‰å¸¦æœ‰code-demoç±»çš„å…ƒç´ å¯ç”¨ä»£ç é«˜äº®
      });
    });
  </script>

  <!-- LiveUser å®æ—¶ç»Ÿè®¡è„šæœ¬ - ä½¿ç”¨åŠ¨æ€é…ç½® -->
  <script src="/liveuser.js?siteId=demo-site&debug=true"></script>

  <script>
    // åˆå§‹åŒ–layuiæ‚¬æµ®å·¥å…·æ 
    layui.use('util', function () {
      layui.util.fixbar(); // æ˜¾ç¤ºè¿”å›é¡¶éƒ¨ç­‰æ‚¬æµ®æŒ‰é’®
    });
  </script>

</body>

</html>
