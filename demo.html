<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LiveUser - 实时在线用户统计</title>
  <link rel="icon" type="image/png" href="https://img.icons8.com/parakeet/1000/user.png">
  
  <!-- 引入layui框架的JavaScript和CSS文件 -->
  <script src="https://cdn.jsdelivr.net/npm/layui/dist/layui.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/ymyuuu/config/JS/layui-dark.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/layui/dist/css/layui.min.css">

  <style>
    #liveuser {
      transition: all 0.3s ease;
      display: inline-block;
      font-weight: bold;
    }
    #liveuser.updating {
      transform: scale(1.2);
      color: #FFB800;
    }
  </style>
</head>

<body>
  <div class="layui-container" style="margin-top: 20px;">
    <div class="layui-row">
      <div class="layui-col-md8 layui-col-md-offset2">

        <!-- 状态显示 -->
        <fieldset class="layui-elem-field layui-field-title">
          <legend><i class="layui-icon layui-icon-radio"></i> LiveUser 状态</legend>
          <div class="layui-field-box">
            <blockquote class="layui-elem-quote">
              当前在线人数：<span id="liveuser"><i class="layui-icon layui-icon-loading-1 layui-anim layui-anim-rotate layui-anim-loop"></i></span>
              <br>
              <small style="color: #999;">右下角也有悬浮显示器，两者会同步更新</small>
            </blockquote>
          </div>
        </fieldset>

        <!-- 服务介绍 -->
        <fieldset class="layui-elem-field layui-field-title">
          <legend><i class="layui-icon layui-icon-user"></i> 关于 LiveUser</legend>
          <div class="layui-field-box">
            <p>LiveUser 是一款基于 Go + WebSocket 的高性能实时在线用户统计服务。</p>
            <ul class="layui-ul">
              <li><strong>⚡ 实时统计</strong> - WebSocket 长连接，毫秒级更新</li>
              <li><strong>🔗 简单集成</strong> - 一行代码即可集成</li>
              <li><strong>🌐 多站点支持</strong> - 支持多个站点独立统计</li>
              <li><strong>🚀 零配置</strong> - 自动识别服务器地址和站点</li>
              <li><strong>🎨 多种显示模式</strong> - 支持 span 元素、悬浮显示器或两者同时</li>
            </ul>
          </div>
        </fieldset>

        <!-- 显示模式 -->
        <blockquote class="layui-elem-quote">
          <i class="layui-icon layui-icon-templeate-1"></i> 显示模式
        </blockquote>
        
        <p><strong>模式一：仅悬浮显示器（推荐）</strong></p>
        <pre id="example1" class="layui-code"></pre>

        <p><strong>模式二：仅 span 元素</strong></p>
        <pre id="example2" class="layui-code"></pre>

        <p><strong>模式三：同时显示（默认）</strong></p>
        <pre id="example3" class="layui-code"></pre>

        <!-- 配置参数 -->
        <blockquote class="layui-elem-quote">
          <i class="layui-icon layui-icon-set"></i> 配置参数
        </blockquote>
        
        <p>通过 URL 参数自定义配置：</p>
        <pre id="example4" class="layui-code"></pre>

        <p><strong>可用参数：</strong></p>
        <table class="layui-table">
          <thead>
            <tr>
              <th>参数</th>
              <th>默认值</th>
              <th>说明</th>
            </tr>
          </thead>
          <tbody>
            <tr>
              <td><code>type</code></td>
              <td>all</td>
              <td>显示模式：all（同时显示）、span（仅span元素）、float（仅悬浮显示器）</td>
            </tr>
            <tr>
              <td><code>siteId</code></td>
              <td>当前域名</td>
              <td>站点标识符，用于多站点独立统计</td>
            </tr>
            <tr>
              <td><code>displayElementId</code></td>
              <td>liveuser</td>
              <td>span 元素的 ID（仅在 type=span 或 all 时有效）</td>
            </tr>
            <tr>
              <td><code>debug</code></td>
              <td>true</td>
              <td>调试模式，控制台日志开关</td>
            </tr>
            <tr>
              <td><code>reconnectDelay</code></td>
              <td>3000</td>
              <td>重连延迟时间（毫秒）</td>
            </tr>
          </tbody>
        </table>

        <!-- 使用场景 -->
        <blockquote class="layui-elem-quote">
          <i class="layui-icon layui-icon-fire"></i> 使用场景
        </blockquote>
        
        <ul class="layui-ul">
          <li><strong>博客网站：</strong>只需要悬浮显示器，不干扰页面内容</li>
          <li><strong>论坛系统：</strong>在页面指定位置显示在线人数</li>
          <li><strong>企业官网：</strong>同时显示页面内容和悬浮提示</li>
          <li><strong>移动端页面：</strong>悬浮显示器自动适配移动设备</li>
        </ul>

      </div>
    </div>
  </div>

  <script>
    // 动态生成示例代码
    const host = window.location.host;
    const protocol = window.location.protocol;

    // 模式一：仅悬浮显示器
    document.getElementById('example1').textContent = '<!-- 无需添加任何HTML元素，自动创建右下角悬浮显示器 -->\n<script src="' + protocol + '//' + host + '/liveuser.js?type=float"></script>';
    
    // 模式二：仅span元素
    document.getElementById('example2').textContent = '<!-- 添加显示元素 -->\n<span id="liveuser">加载中...</span>\n\n<!-- 引入脚本（仅更新span元素） -->\n<script src="' + protocol + '//' + host + '/liveuser.js?type=span"></script>';
    
    // 模式三：同时显示
    document.getElementById('example3').textContent = '<!-- 添加显示元素（可选） -->\n<span id="liveuser">加载中...</span>\n\n<!-- 引入脚本（默认同时显示span和悬浮显示器） -->\n<script src="' + protocol + '//' + host + '/liveuser.js"></script>';
    
    // 配置示例
    document.getElementById('example4').textContent = '<!-- 自定义站点ID -->\n<script src="' + protocol + '//' + host + '/liveuser.js?siteId=blog&type=float"></script>\n\n<!-- 关闭调试模式 -->\n<script src="' + protocol + '//' + host + '/liveuser.js?debug=false&type=float"></script>\n\n<!-- 自定义span元素ID -->\n<span id="online-count">0</span>\n<script src="' + protocol + '//' + host + '/liveuser.js?type=span&displayElementId=online-count"></script>';

    // 初始化代码高亮
    layui.use('code', function(){
      layui.code();
    });
  </script>

  <!-- LiveUser 统计脚本 - 演示模式（同时显示span和悬浮显示器） -->
  <script src="/liveuser.js?siteId=demo-site&debug=true&type=all"></script>

</body>
</html>
