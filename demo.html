<!DOCTYPE html>
<html lang="zh-CN">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LiveUser - 实时在线用户统计</title>
  <link rel="icon" type="image/png" href="https://img.icons8.com/parakeet/1000/user.png">
  
  <!-- 引入layui框架的JavaScript和CSS文件 -->
  <script src="https://cdn.jsdelivr.net/npm/layui/dist/layui.min.js"></script>
  <script src="https://cdn.jsdelivr.net/gh/ymyuuu/config/JS/layui-dark.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/layui/dist/css/layui.min.css">

  <style>
    #liveuser {
      transition: all 0.3s ease;
      display: inline-block;
      font-weight: bold;
    }
    #liveuser.updating {
      transform: scale(1.2);
      color: #FFB800;
    }
  </style>
</head>

<body>
  <div class="layui-container" style="margin-top: 20px;">
    <div class="layui-row">
      <div class="layui-col-md8 layui-col-md-offset2">

        <!-- 状态显示 -->
        <fieldset class="layui-elem-field layui-field-title">
          <legend><i class="layui-icon layui-icon-radio"></i> LiveUser 状态</legend>
          <div class="layui-field-box">
            <blockquote class="layui-elem-quote">
              当前在线人数：<span id="liveuser"><i class="layui-icon layui-icon-loading-1 layui-anim layui-anim-rotate layui-anim-loop"></i></span>
            </blockquote>
          </div>
        </fieldset>

        <!-- 服务介绍 -->
        <fieldset class="layui-elem-field layui-field-title">
          <legend><i class="layui-icon layui-icon-user"></i> 关于 LiveUser</legend>
          <div class="layui-field-box">
            <p>LiveUser 是一款基于 Go + WebSocket 的高性能实时在线用户统计服务。</p>
            <ul class="layui-ul">
              <li><strong>⚡ 实时统计</strong> - WebSocket 长连接，毫秒级更新</li>
              <li><strong>🔗 简单集成</strong> - 一行代码即可集成</li>
              <li><strong>🌐 多站点支持</strong> - 支持多个站点独立统计</li>
              <li><strong>🚀 零配置</strong> - 自动识别服务器地址和站点</li>
            </ul>
          </div>
        </fieldset>

        <!-- 使用方法 -->
        <blockquote class="layui-elem-quote">
          <i class="layui-icon layui-icon-form"></i> 快速开始
        </blockquote>
        
        <p><strong>第一步：添加显示元素</strong></p>
        <pre id="example1" class="layui-code"></pre>

        <p><strong>第二步：引入脚本</strong></p>
        <pre id="example2" class="layui-code"></pre>

        <!-- 配置参数 -->
        <blockquote class="layui-elem-quote">
          <i class="layui-icon layui-icon-set"></i> 配置参数
        </blockquote>
        
        <p>通过 URL 参数自定义配置：</p>
        <pre id="example3" class="layui-code"></pre>

        <p><strong>可用参数：</strong></p>
        <ul class="layui-ul">
          <li><code>siteId</code> - 站点标识符</li>
          <li><code>displayElementId</code> - 显示元素 ID</li>
          <li><code>debug</code> - 调试模式</li>
          <li><code>reconnectDelay</code> - 重连延迟（毫秒）</li>
        </ul>

      </div>
    </div>
  </div>

  <script>
    // 动态生成示例代码
    const host = window.location.host;
    const protocol = window.location.protocol;

    document.getElementById('example1').textContent = `<span id="liveuser">加载中...</span>`;
    
    document.getElementById('example2').textContent = `<script src="${protocol}//${host}/liveuser.js"></script>`;
    
    document.getElementById('example3').textContent = `<!-- 自定义站点ID -->
<script src="${protocol}//${host}/liveuser.js?siteId=blog"></script>

<!-- 关闭调试模式 -->
<script src="${protocol}//${host}/liveuser.js?debug=false"></script>

<!-- 完整配置 -->
<script src="${protocol}//${host}/liveuser.js?siteId=my-site&displayElementId=counter&debug=false"></script>`;

    // 初始化代码高亮
    layui.use('code', function(){
      layui.code();
    });
  </script>

  <!-- LiveUser 统计脚本 -->
  <script src="/liveuser.js?siteId=demo-site&debug=true"></script>

</body>
</html>
